# Сценарий Apache Ant для Лабораторной работы №3

Данный сценарий Apache Ant реализует компиляцию, тестирование и упаковку в jar-архив кода проекта из лабораторной работы №3 по дисциплине "Веб-программирование".

## Требования

Для работы со сценарием необходимы:
- JDK 11 или выше
- Apache Ant 1.10.x
- Настроенные переменные окружения JAVA_HOME и ANT_HOME

## Структура файлов сценария

- `build.xml` - основной файл сценария Apache Ant
- `properties.xml` - файл с параметрами сценария
- `META-INF/MANIFEST.MF` - файл с информацией о версии и запускаемом классе
- `resources/replace.properties` - файл с правилами замены для альтернативной версии

## Цели (targets) сценария

1. `compile` - компиляция исходных кодов проекта.
2. `build` - компиляция исходных кодов проекта и их упаковка в исполняемый jar-архив. Компиляцию исходных кодов реализовать посредством вызова цели `compile`.
3. `clean` - удаление скомпилированных классов проекта и всех временных файлов (если они есть).
4. `test` - запуск junit-тестов проекта. Перед запуском тестов необходимо осуществить сборку проекта (цель `build`).
5. `xml` - валидация всех xml-файлов в проекте.
6. `doc` - добавление в MANIFEST.MF MD5 и SHA-1 файлов проекта, а также генерация и добавление в архив javadoc по всем классам проекта.
7. `native2ascii` - преобразование native2ascii для копий файлов локализации (для тестирования сценария все строковые параметры необходимо вынести в классы локализации).
8. `scp` - перемещение собранного проекта по scp на выбранный сервер по завершению сборки. Предварительно необходимо выполнить сборку проекта (цель `build`).
9. `music` - воспроизведение музыки по завершению сборки (цель `build`).
10. `report` - в случае успешного прохождения тестов сохраняет отчет junit в формате xml, добавляет его в репозиторий svn и выполняет commit.
11. `history` - если проект не удаётся скомпилировать (цель `compile`), загружается предыдущая версия из репозитория svn. Операция повторяется до тех пор, пока проект не удастся собрать, либо не будет получена самая первая ревизия из репозитория. Если такая ревизия найдена, то формируется файл, содержащий результат операции diff для всех файлов, изменённых в ревизии, следующей непосредственно за последней работающей.
12. `alt` - создаёт альтернативную версию программы с измененными именами переменных и классов (используя задание replace/replaceregexp в файлах параметров) и упаковывает её в jar-архив. Для создания jar-архива используется цель `build`.
13. `diff` - осуществляет проверку состояния рабочей копии, и, если изменения касаются классов, указанных в файле параметров выполняет commit в репозиторий git.
14. `env` - осуществляет сборку и запуск программы в альтернативных окружениях; окружение задается версией java и набором аргументов виртуальной машины в файле параметров.
15. `team` - осуществляет получение из git-репозитория 4 предыдущих ревизий, их сборку (по аналогии с основной) и упаковку получившихся jar-файлов в zip-архив. Сборку реализовать посредством вызова цели `build`.

## Использование

1. Убедитесь, что установлены JDK и Apache Ant, настроены переменные окружения
2. Настройте параметры в файле `properties.xml` под свой проект
3. Запустите нужную цель сценария с помощью команды:

```bash
ant <имя_цели>
```

Например, для компиляции и упаковки проекта:

```bash
ant build
```

## Дополнительная информация

- В файле `properties.xml` находятся все параметры и константы, используемые в сценарии
- MANIFEST.MF содержит информацию о версии и запускаемом классе проекта
- Для создания альтернативной версии используются правила замены из файла `resources/replace.properties` 